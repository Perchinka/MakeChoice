# `src/api/`

## Что делает этот слой

- **`app.py`**  
  - Создаёт экземпляр FastAPI, подключает всё необходимое (роутеры, middleware, шаблоны).  
  - Регистрирует общий обработчик ошибок для доменных исключений. (Ловим внутренние ошибки и мапим на HTTP-коды)

- **`routers/`**  
  - Группирует все HTTP-эндпоинты по сущностям:
    - `auth.py` — весь SSO-флоу (login -> callback -> JWT-куки), не факт что будет работать с iu-sso, но я постарался сделать фейковую версию похожей на нее.  
    - `users.py` — `GET /users/me` пока что единственный эндпоинт, возвращает инфу по нынешнему пользователю 
    - `courses.py` — CRUD и импорт курсов. 
    - `choices.py` — list, replace и delete выборы студента.

Все роутеры можно найти на localhost:8000/docs, когда запустишь систему. Как запускать смотри в главном README

- **`models.py`**  
  - Pydantic-схемы для валидации входящих и исходящих данных. https://docs.pydantic.dev/latest/ 
  - Разграничивает «сырые» HTTP-модели от внутренних доменных сущностей.

- **`dependencies.py`**  
  - Здесь описаны зависимости FastAPI (пока что только `get_uow` для UnitOfWork).

- **`error_handler.py`**  
  - Переводит доменные исключения (`AppError`) в понятные HTTP-коды (404, 400, 403…). (О чем писал выше)

